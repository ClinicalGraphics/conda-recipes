package:
  name: osmesa
  version: 13.0.4

source:
  fn: mesa-13.0.4.tar.gz
  url: https://mesa.freedesktop.org/archive/13.0.4/mesa-13.0.4.tar.gz

build:
  number: 0

requirements:
  build:
    - llvm >=3.9 # [unix]
    - llvm 3.7.1  # [win]
    - scons # [win]
    - mako
    - pywin32 # [win]
    - win_flex_bison # [win]
    - flex  # [unix]
    - bison  # [unix]
    - pkg-config # [unix]
    - autoconf # [unix]
    - pthread-stubs # [unix]
    - automake # [unix]
    - libtool # [unix]
    - m4 # [unix]
    - glproto # [unix]
    - libx11 # [unix]
    - kbproto # [unix]
    - libxau # [unix]
    - libxdmcp # [unix]
    - libxext # [unix]
    - omxil-bellagio # [unix]

  run:
    - llvm >=3.9 # [unix]
    - llvm 3.7.1   # [win]

test:
  commands:
    - test -f $PREFIX/lib/libOSMesa.dylib  # [osx]
    - test -f $PREFIX/lib/libOSMesa.so     # [linux]
    - test -f $PREFIX/lib/libGL.so         # [linux]
    - if not exist %LIBRARY_BIN%\\osmesa.dll exit 1 # [win]

about:
  home: http://www.mesa3d.org/
  license: MIT + Others
