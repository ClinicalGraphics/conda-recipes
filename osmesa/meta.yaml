package:
  name: osmesa
  version: 17.1.5

source:
  fn: mesa-17.1.5.tar.gz
  url: https://mesa.freedesktop.org/archive/mesa-17.1.5.tar.gz

build:
  number: 0

requirements:
  build:
    - scons >=2.3.0 # [win]
    - mako >=1.0.6
    - llvm >=4.0.1
    - pywin32 >=220 # [win]
    - win_flex_bison >=2.5.6 # [win]
    - flex >=2.6.0 # [unix]
    - bison >=3.0.4 # [unix]
    - pkg-config >=0.28 # [unix]
    - autoconf >=2.69 # [unix]
    - pthread-stubs >=0.3 # [unix]
    - automake >=1.15 # [unix]conda
    - libtool >=2.4.2 # [unix]
    - m4 >=1.4.17 # [unix]
    - glproto >=1.4.17 # [unix]
    - libx11 >=1.6.4 # [unix]
    - kbproto >=1.0.7 # [unix]
    - libxau >=1.0.8 # [unix]
    - libxdmcp >=1.1.2 # [unix]
    - libxext >=1.3.3 # [unix]
    - omxil-bellagio >=0.9.3 # [unix]

  run:
    - llvm >=4.0.1

test:
  commands:
    - test -f $PREFIX/lib/libOSMesa.dylib  # [osx]
    - test -f $PREFIX/lib/libOSMesa.so     # [linux]
    - if not exist %LIBRARY_BIN%\\osmesa.dll exit 1 # [win]

about:
  home: http://www.mesa3d.org/
  license: MIT + Others
