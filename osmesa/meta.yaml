package:
  name: osmesa
  version: 12.0.1

source:
  url: https://mesa.freedesktop.org/archive/12.0.1/mesa-12.0.1.tar.gz
  fn: mesa-12.0.1.tar.gz

build:
  number: 0
  msvc_compiler: 14.0

requirements:
  build:
    - python
    - mako
    - llvm
    - scons # [win]
    - mingw # [win]
    - pywin32 # [win]
    - mingwpy  # [win]
    - toolchain # [unix]
    - pkg-config # [unix]
    - autoconf # [unix]
    - pthread-stubs # [unix] # for version 12.0.1
    - automake # [unix]
    - libtool # [unix]
    - m4 # [unix]
    - flex  # [unix]
    - bison  # [unix]
    - glproto # [unix]

  run:
    - llvm

test:
  commands:
    - test -f $PREFIX/lib/libOSMesa.dylib  # [osx]
    - test -f $PREFIX/lib/libOSMesa.so     # [linux]
    - test -f $PREFIX/lib/libOSMesa.dll    # [win]

about:
    home: https://github.com/mesa3d/mesa
    license: MIT
